syntax = "proto3";
option java_package = "chatweb.chat";

message CreateRoomResponse {
  int32 id = 1;
  string key = 2;
}

message MessageIdResponse {
  string messageId = 1;
}

message CreateRoomRequest {
  int32 creatorId = 1;
  string prefix = 2;
  string password = 3;
}

message SendMessageRequest {
  int32 userId = 1;
  string message = 2;
  optional string buttonsJson = 3;
  optional string repliedMessageId = 4;
}

message EditMessageRequest {
  string messageId = 1;
  string message = 2;
}

service ChatService {
  rpc CreateRoom(CreateRoomRequest) returns (CreateRoomResponse);
  rpc SendMessage(SendMessageRequest) returns (MessageIdResponse);
  rpc EditMessage(EditMessageRequest) returns (MessageIdResponse);
}
